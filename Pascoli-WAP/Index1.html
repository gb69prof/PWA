<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pascoli — Libro.0</title>
  <meta name="description" content="Pascoli — web app didattica per autore. Pagina iniziale." />

  <style>
    :root{
      /* Palette: neutri puliti + due accenti (oro/azzurro). */
      --bg0:#0b1220;
      --bg1:#0e1730;
      --paper:#ffffff;
      --glass:rgba(255,255,255,.08);
      --glass2:rgba(255,255,255,.12);

      --ink:#0f172a;
      --inkOnDark:rgba(255,255,255,.92);
      --mutedOnDark:rgba(255,255,255,.72);
      --hair:rgba(255,255,255,.18);
      --hair2:rgba(15,23,42,.12);

      --accent:#ffb703;   /* oro */
      --accent2:#219ebc;  /* azzurro */
      --good:#22c55e;

      --r-xl:26px;
      --r-lg:18px;
      --r-md:14px;

      --shadow: 0 18px 60px rgba(0,0,0,.28);
      --shadowSoft: 0 14px 40px rgba(0,0,0,.18);

      --max:1160px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      letter-spacing:.15px;
      color: var(--ink);
      background:
        radial-gradient(1000px 700px at 10% 10%, rgba(33,158,188,.38), transparent 60%),
        radial-gradient(900px 650px at 90% 15%, rgba(255,183,3,.30), transparent 55%),
        radial-gradient(900px 650px at 60% 110%, rgba(34,197,94,.18), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
    }

    a{ color:inherit; text-decoration:none; }
    button{ font-family:inherit; }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 22px 18px 34px;
    }

    /* Top bar “da prodotto”, non da compito scolastico. */
    .topbar{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:16px;
      color: var(--inkOnDark);
    }
    .brand{
      display:flex; align-items:center; gap:10px;
      min-width: 220px;
    }
    .mark{
      width:38px; height:38px;
      border-radius: 14px;
      background:
        radial-gradient(18px 18px at 30% 35%, rgba(255,255,255,.32), transparent 55%),
        linear-gradient(135deg, rgba(33,158,188,.95), rgba(255,183,3,.95));
      box-shadow: 0 10px 28px rgba(0,0,0,.25);
      border: 1px solid rgba(255,255,255,.22);
    }
    .brandTitle{
      display:flex; flex-direction:column; line-height:1.05;
    }
    .brandTitle b{ font-size:14px; letter-spacing:.7px; }
    .brandTitle span{ font-size:12px; color: var(--mutedOnDark); }

    .chiprow{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      border-radius:999px;
      padding:8px 10px;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: var(--mutedOnDark);
      font-size:12px; font-weight:700;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .dot{ width:8px; height:8px; border-radius:50%; background: var(--good); box-shadow: 0 0 0 3px rgba(34,197,94,.18); }

    /* HERO */
    .hero{
      border-radius: var(--r-xl);
      border: 1px solid rgba(255,255,255,.16);
      background:
        radial-gradient(900px 420px at 18% 30%, rgba(255,183,3,.18), transparent 60%),
        radial-gradient(900px 420px at 72% 10%, rgba(33,158,188,.20), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      box-shadow: var(--shadow);
      overflow:hidden;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .heroInner{
      display:grid;
      grid-template-columns: 1.2fr 1fr;
      gap: 18px;
      padding: 18px;
      align-items: stretch;
    }
    @media (max-width: 980px){
      .heroInner{ grid-template-columns:1fr; }
      .chiprow{ justify-content:flex-start; }
    }

    /* Colonna testo (a sinistra) */
    .heroText{
      padding: 10px 8px 12px;
      color: var(--inkOnDark);
    }
    .kicker{
      display:inline-flex; align-items:center; gap:10px;
      font-size:12px;
      color: var(--mutedOnDark);
      letter-spacing:.9px;
      text-transform:uppercase;
    }
    .kicker .bar{
      width:38px; height:1px; background: rgba(255,255,255,.22);
    }

    .headlineBtn{
      margin-top:10px;
      width:100%;
      text-align:left;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.10);
      color: var(--inkOnDark);
      padding: 14px 14px;
      border-radius: 18px;
      cursor:pointer;
      box-shadow: var(--shadowSoft);
      transition: transform .14s ease, background .14s ease, border-color .14s ease;
    }
    .headlineBtn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.14);
      border-color: rgba(255,183,3,.40);
    }
    .headlineBtn:focus{
      outline: 2px solid rgba(33,158,188,.55);
      outline-offset: 3px;
    }
    .headline{
      font-weight: 950;
      font-size: clamp(28px, 4.4vw, 54px);
      line-height: 1.02;
      letter-spacing: .2px;
      margin:0;
    }
    .subline{
      margin: 8px 0 0;
      color: var(--mutedOnDark);
      font-size: 14px;
      line-height:1.55;
    }

    .meaning{
      margin-top: 14px;
      border-radius: var(--r-lg);
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      padding: 14px 14px;
    }
    .meaning p{ margin:0; color: rgba(255,255,255,.88); font-size:14px; line-height:1.65; }
    .meaning .mini{ margin-top:10px; color: rgba(255,255,255,.72); font-size:12px; line-height:1.5; }
    .meaning details{ margin-top:12px; padding-top:12px; border-top: 1px dashed rgba(255,255,255,.20); }
    .meaning summary{
      cursor:pointer;
      list-style:none;
      font-weight:900;
      color: rgba(255,255,255,.88);
    }
    .meaning summary::-webkit-details-marker{ display:none; }

    /* Colonna stage (a destra) */
    .stage{
      border-radius: var(--r-xl);
      border: 1px solid rgba(255,255,255,.16);
      background:
        radial-gradient(700px 340px at 20% 30%, rgba(255,183,3,.14), transparent 62%),
        radial-gradient(700px 340px at 90% 10%, rgba(33,158,188,.14), transparent 62%),
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
      overflow:hidden;
      position:relative;
      min-height: clamp(360px, 52vh, 560px);
      box-shadow: var(--shadowSoft);
    }

    .stageTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 12px 12px 0;
      color: rgba(255,255,255,.86);
    }
    .hint{
      font-size:12px;
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.78);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }

    .stageInner{
      position:absolute;
      inset: 56px 12px 12px 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      overflow:hidden;
    }

    .portraitBtn{
      width:100%; height:100%;
      border:0; background:transparent;
      cursor:pointer;
      display:flex; align-items:center; justify-content:center;
    }
    .portraitBtn img{
      width:100%; height:100%;
      object-fit: contain;
      background: rgba(255,255,255,.10);
    }

    .videoWrap{ width:100%; height:100%; background:#fff; }
    .videoWrap iframe{ width:100%; height:100%; border:0; display:block; }

    .stageActions{
      position:absolute;
      left: 18px;
      right: 18px;
      bottom: 18px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      pointer-events:none;
    }
    .btn{
      pointer-events:auto;
      display:inline-flex; align-items:center; gap:10px;
      border-radius: 14px;
      padding: 10px 12px;
      font-size:12px;
      font-weight:900;
      cursor:pointer;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.10);
      color: rgba(255,255,255,.90);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      transition: transform .14s ease, background .14s ease, border-color .14s ease;
      user-select:none;
      white-space:nowrap;
    }
    .btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.14); border-color: rgba(33,158,188,.40); }
    .btnPrimary{
      background: linear-gradient(135deg, rgba(33,158,188,.95), rgba(255,183,3,.95));
      border-color: rgba(255,255,255,.18);
      color: rgba(12,18,32,.92);
    }
    .btnPrimary:hover{ border-color: rgba(255,255,255,.22); }

    .btnGhost{ display:none; }

    /* Indice */
    .section{
      margin-top: 16px;
      border-radius: var(--r-xl);
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadowSoft);
      overflow:hidden;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .sectionHd{
      padding: 14px 16px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      border-bottom: 1px solid rgba(255,255,255,.14);
      color: rgba(255,255,255,.86);
    }
    .sectionHd strong{
      font-size:12px;
      letter-spacing: .9px;
      text-transform: uppercase;
    }
    .sectionBd{
      padding: 10px 10px 12px;
    }

    .nav{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    @media (max-width: 820px){ .nav{ grid-template-columns:1fr; } }

    .nav a{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      padding: 12px 12px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 12px;
      transition: transform .14s ease, background .14s ease, border-color .14s ease;
      color: rgba(255,255,255,.90);
    }
    .nav a:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.12);
      border-color: rgba(255,183,3,.36);
    }
    .nav .meta{ display:flex; flex-direction:column; gap:6px; }
    .nav .label{ font-weight:950; font-size:13px; letter-spacing:.2px; }
    .nav .sub{ font-size:12px; color: rgba(255,255,255,.72); line-height:1.35; }
    .nav .chev{
      font-weight:950;
      color: rgba(255,255,255,.78);
      margin-top: 2px;
    }

    footer{
      margin-top: 14px;
      color: rgba(255,255,255,.62);
      font-size:12px;
      padding: 0 2px;
    }

    @media (prefers-reduced-motion: reduce){
      *{ transition:none !important; }
    }
  </style>

  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#961B2B">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
</head>

<body>
  <div class="wrap">
    <header class="topbar" aria-label="Intestazione Libro.0">
      <div class="brand">
        <div class="mark" aria-hidden="true"></div>
        <div class="brandTitle">
          <b>Pascoli — Libro.0</b>
          <span>web app didattica • percorso attraversabile</span>
        </div>
      </div>

      <div class="chiprow" aria-label="Indicatori">
        <div class="chip"><span class="dot" aria-hidden="true"></span> pronto per lezione</div>
        <div class="chip">Vita → Mondo → Poetica → Testi</div>
      </div>
    </header>

    <main class="hero" aria-label="Home Pascoli">
      <div class="heroInner">
        <!-- TESTO / BUSSOLA -->
        <section class="heroText" aria-label="Bussola e significato">
          <div class="kicker"><span class="bar" aria-hidden="true"></span> Bussola</div>

          <button id="phraseBtn" class="headlineBtn" type="button" aria-controls="meaningBox" aria-expanded="false">
            <p class="headline">Io non sono mai cresciuto</p>
            <p class="subline">
              Tocca per aprire il senso della frase e usare Pascoli come una mappa, non come una vetrina.
            </p>
          </button>

          <section id="meaningBox" class="meaning" aria-label="Significato della frase">
            <p>
              Qui “non crescere” non significa restare bambini. Significa restare <b>esposti</b>:
              non imparare davvero a difendersi dal mondo. Il <b>fanciullino</b> non è una favola dolce:
              è uno sguardo che sente troppo e trasforma le cose in <b>segni</b> (suoni, dettagli, presagi).
            </p>
            <div class="mini">
              In questa web app la frase è la bussola: <b>Vita</b> → <b>Immagine del mondo</b> → <b>Poetica</b> → <b>Testi</b>.
            </div>

            <details id="moreMeaning">
              <summary>Approfondisci (30 secondi)</summary>
              <p style="margin-top:10px;">
                Pascoli non “sceglie” di essere semplice: la sua forma è necessità.
                Frasi brevi, immagini accostate, silenzi, suoni: è un modo di scrivere che registra un mondo fragile.
                Non consola: fa vedere ciò che di solito resta sotto.
              </p>
            </details>
          </section>
        </section>

        <!-- STAGE FOTO/VIDEO -->
        <section class="stage" aria-label="Pascoli (foto o video)">
          <div class="stageTop">
            <div class="hint" id="hint">clic sulla foto: eco di Pascoli</div>
            <div class="hint" aria-hidden="true">HeyGen embed</div>
          </div>

          <div class="stageInner" id="stageInner">
            <button class="portraitBtn" id="portraitBtn" type="button" aria-label="Apri il video dell’eco di Pascoli">
              <img src="assets/pascoli-foto.png" alt="Pascoli (foto)" />
            </button>
          </div>

          <div class="stageActions" aria-label="Azioni video">
            <button class="btn btnPrimary" id="cta" type="button">▶︎ Guarda l’eco di Pascoli</button>
            <button class="btn btnGhost" id="backToPhoto" type="button">↩︎ Torna alla foto</button>
          </div>
        </section>
      </div>
    </main>

    <!-- INDICE -->
    <section class="section" aria-label="Indice della web app">
      <div class="sectionHd">
        <strong>Indice</strong>
        <span style="color:rgba(255,255,255,.70); font-size:12px;">4 porte, poi gli approfondimenti</span>
      </div>

      <div class="sectionBd">
        <nav class="nav" aria-label="Navigazione principale">
          <a href="vita.html">
            <div class="meta">
              <div class="label">1. La vita</div>
              <div class="sub">sintesi + pagine collegate</div>
            </div>
            <div class="chev">›</div>
          </a>

          <a href="mondo.html">
            <div class="meta">
              <div class="label">2. L’immagine del mondo</div>
              <div class="sub">segni, presagi, realtà instabile</div>
            </div>
            <div class="chev">›</div>
          </a>

          <a href="poetica.html">
            <div class="meta">
              <div class="label">3. La poetica</div>
              <div class="sub">fanciullino, forma, lingua</div>
            </div>
            <div class="chev">›</div>
          </a>

          <a href="gelsomino/gelsomino.html">
            <div class="meta">
              <div class="label">4. I testi — Il gelsomino notturno</div>
              <div class="sub">pagina + lavoro sul testo</div>
            </div>
            <div class="chev">›</div>
          </a>

          <a href="testi/x-agosto.html">
            <div class="meta">
              <div class="label">4. I testi — X agosto</div>
              <div class="sub">pagina + lavoro sul testo</div>
            </div>
            <div class="chev">›</div>
          </a>

          <a href="digitale/digitale.html">
            <div class="meta">
              <div class="label">4. I testi — Digitale purpurea</div>
              <div class="sub">pagina + lavoro sul testo</div>
            </div>
            <div class="chev">›</div>
          </a>
        </nav>
      </div>
    </section>

    <footer>© <span id="year"></span> — Pascoli / Libro.0 — a cura di gbprof</footer>
  </div>

  <script>
    const $ = (q, r=document) => r.querySelector(q);
    $('#year').textContent = new Date().getFullYear();

    // Frase: apre/chiude l’approfondimento (senza cambiare il tuo contenuto).
    const phraseBtn = $('#phraseBtn');
    const details = $('#moreMeaning');
    phraseBtn.addEventListener('click', () => {
      details.open = !details.open;
      phraseBtn.setAttribute('aria-expanded', details.open ? 'true' : 'false');
      $('#meaningBox').scrollIntoView({behavior:'smooth', block:'start'});
    });

    // Stage: foto -> video HeyGen -> foto
    const stageInner = $('#stageInner');
    const cta = $('#cta');
    const hint = $('#hint');
    const backToPhoto = $('#backToPhoto');

    const heygenHTML = `
      <div class="videoWrap" id="videoWrap">
        <iframe
          src="https://app.heygen.com/embedded-player/e5c1a51af56e43589b800ebb00cb1507"
          title="HeyGen video player"
          frameborder="0"
          allow="encrypted-media; fullscreen;"
          allowfullscreen
        ></iframe>
      </div>
    `;

    let showingVideo = false;

    function wirePortrait(){
      const p = $('#portraitBtn');
      if(p) p.addEventListener('click', showVideo);
    }

    function showVideo(){
      if(showingVideo) return;
      stageInner.innerHTML = heygenHTML;
      showingVideo = true;
      cta.style.display = 'none';
      backToPhoto.style.display = 'inline-flex';
      hint.textContent = 'video: eco di Pascoli';
    }

    function showPhoto(){
      if(!showingVideo) return;
      stageInner.innerHTML = `
        <button class="portraitBtn" id="portraitBtn" type="button" aria-label="Apri il video dell’eco di Pascoli">
          <img src="assets/pascoli-foto.png" alt="Pascoli (foto)" />
        </button>
      `;
      showingVideo = false;
      cta.style.display = 'inline-flex';
      backToPhoto.style.display = 'none';
      hint.textContent = 'clic sulla foto: eco di Pascoli';
      wirePortrait();
    }

    wirePortrait();
    cta.addEventListener('click', showVideo);
    backToPhoto.addEventListener('click', showPhoto);
  </script>

  <script src="pwa.js" defer></script>
</body>
</html>
